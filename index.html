<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>XPAIO Sandbox Finder</title>
    <script src="https://sdk.minepi.com/pi-sdk.js"></script>
    <style>
        body { background-color: #0d1117; color: #fff; font-family: sans-serif; text-align: center; padding-top: 50px; }
        .code-box { background: #000; color: #39ff14; padding: 30px; font-size: 2em; border: 2px solid #58a6ff; border-radius: 15px; margin: 20px; word-break: break-all; }
    </style>
</head>
<body>
    <h1>XPAIO 보안 검증</h1>
    <div id="status">파이 네트워크 연결 시도 중...</div>
    <div id="result" class="code-box">대기 중...</div>
    <p style="color: #8b949e;">"Authentication failed" 뒤에 나오는 7자리 코드를 찾으세요.</p>

    <script>
        async function getSandboxCode() {
            const status = document.getElementById("status");
            const result = document.getElementById("result");
            try {
                // 서버 주소 없이 SDK만 초기화합니다
                await window.Pi.init({ version: "2.0", sandbox: true });
                status.innerText = "인증창 유도 중...";
                
                // 결제 콜백 없이 단순 인증만 시도합니다
                await window.Pi.authenticate(['username'], (payment) => {});
                
                result.innerText = "이미 인증됨";
            } catch (err) {
                // 여기서 7자리 코드가 뿜어져 나옵니다
                console.error(err);
                result.innerText = err.message || JSON.stringify(err);
                status.innerText = "코드를 확인하세요!";
            }
        }
        window.onload = getSandboxCode;
    </script>
</body>
</html>